Step-1: create schema
step-2: validate data using schema



const Joi = require('joi');

const schema = Joi.object({
  username: Joi.string()
    .alphanum() // Must contain only alphanumeric characters
    .min(3)      // Minimum length of 3
    .max(30)     // Maximum length of 30
    .required(), // Field is required

  email: Joi.string()
    .email({
      minDomainSegments: 2,
      tlds: { allow: ['com', 'net', 'org', 'info'] } // Restrict top-level domains
    })
    .required(), // Field is required

  password: Joi.string()
    .pattern(new RegExp('^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)[a-zA-Z\\d]{8,}$')) // Must be at least 8 chars long and contain at least one lowercase letter, one uppercase letter, and one number
    .required()
    .label('Password'), // Adds a label for better error messages

  confirmPassword: Joi.string()
    .valid(Joi.ref('password')) // Must match the 'password' field
    .required()
    .label('Confirm Password')
})
.with('password', 'confirmPassword'); // Ensures that if 'password' is present, 'confirmPassword' must also be present (and vice versa for the 'valid' check)

// Example usage:
const dataToValidate = {
  username: 'testuser123',
  email: 'testuser@example.com',
  password: 'StrongP@ss1',
  confirmPassword: 'StrongP@ss1'
};

const validationResult = schema.validate(dataToValidate);

if (validationResult.error) {
  console.error(validationResult.error.details[0].message);
} else {
  console.log('Validation successful:', validationResult.value);
}
